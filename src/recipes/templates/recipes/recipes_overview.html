{% load static %}
<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recipes Overview</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
  <div class="nav-bar">
    <a href="{%url 'recipes:about' %}" class="nav-bar-item">About</a>
    <a href="{%url 'recipes:list' %}" class="nav-bar-item active">All Recipes</a>
    <a href ="{%url 'success' %}" class="nav-bar-item">Logout</a>
    <a href="" class="nav-bar-item"></a>
  </div>
  <!-- chart & modal control buttons -->
  <div class="control-container">
    <!-- <img src="{% static 'recipes/images/graph_up_icon.png' %}" alt="graph_up_icon" onclick="showHideAnalytics()" id="analytics_control" > -->
    <img src="{% static 'images/graph_up_icon.png' %}" alt="graph_up_icon" onclick="showHideAnalytics()" id="analytics_control" >
    <span class="helper-text">data stats</span>
    <button type="button" id="addRecipeButton" class="add-recipe-button">Add Recipe</button>
  </div>
  <!-- chart container -->
  <div id="analytics_container"  style="display: none;">
    <h2 class="page-header" >Recipe Analytics</h2>
    <div class="chart-container">
      <img src="data:image/png;base64, {{top_ing_chart|safe}}" alt="" class="analytics-chart">
      <img src="data:image/png;base64, {{difficulty_spread_chart|safe}}" alt="" class="analytics-chart">
      <img src="data:image/png;base64, {{difficulty_and_time_chart|safe}}" alt="" class="analytics-chart">
    </div>
  </div>
  <!-- add recipe form modal -->
  <div id="add_recipe_modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h3>Add new recipe</h3>
      <form method="post" id="add_recipe_form" enctype="multipart/form-data" data-post-url="{% url 'recipes:add_recipe' %}">
        {% csrf_token %}
        <label for="recipe">Recipe: </label>
        <input type="text" id="recipe_name" name="recipe" required>

        <label for="ingredients">Ingredients (comma separated):</label>
        <input type="text" id="ingredients" name="ingredients" required>

        <label for="cooking_time">Cooking time (in minutes): </label>
        <input type="number" id="cooking_time" name="cooking_time" required>

        <label for="pic">Recipe image:</label>
        <input type="file" id="recipe_pic" name="pic" accept="image/*">
        <button type="submit" id="add_recipe_button">Add Recipe</button>
      </form>
    </div>
  </div>
  <!-- recipe search form -->
  <div id="search_form_container">
    <h2 class="page-header" style="display: block;" >Search for recipes</h2>
    <hr>
    <form action="" method="GET" id="search_form">
      {{search_form}}
      <button type="submit" >search</button>
    </form>
  </div>
  <!--recipes displayed as a list -->
  <h2 class="page-header">{{ main_title }}</h2>
    {% if search_details %}
    <h3 class="search-details">{{ search_details }}</h3>
    {% endif %}

  <div class="main-container">
    {% for object in object_list %}
    <div class="grid_item">
      <img src="{{object.pic_url}}" alt="recipe_image" id="recipe_image">
      <h2> <a href ="{{object.get_absolute_url}}" class="recipe-label"> {{object.name}}</a></h2>
    </div>
    {% endfor %}
  </div>
  <!-- external JS logic -->
  <script src="{% static 'js/script.js' %}" ></script>
</body>
</html>